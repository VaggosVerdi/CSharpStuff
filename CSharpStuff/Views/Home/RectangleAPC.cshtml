@{
    ViewData["Title"] = "Rectangle Area-Perimeter Calculator";
}

<h1 class="text-center mb-5">@ViewData["Title"]</h1>

<div class="container text-center mb-5">
    <p>Input the length and width of a rectangle then press the button for what you wish to calculate</p>
</div>

<div class="container">
    <div class="col-12 col-lg-8 mt-5 m-auto">
        <div class="row">
            <div class="col-md-6 mb-3">
                <label for="length">Length:</label>
                <input type="number" min="0" id="length" name="length" class="mb-3 w-100" placeholder="Input the rectangle's length" />
            </div>
            <div class="col-md-6 mb-3">
                <label for="width">Width:</label>
                <input type="number" min="0" id="width" name="width" class="mb-3 w-100" placeholder="Input the rectangle's width" />
            </div>
            <div class="text-center mb-3">
                <button id="areaBtn" class="btn btn-primary">Calculate Area</button>
                <button id="perimBtn" class="btn btn-primary">Calculate Perimeter</button>
            </div>
            <div id="result" class="mt-3 text-center"></div>
        </div>
    </div>
</div>

@section Scripts {
    <script>
        $(function () {
            function calculate(type) {
                var length = parseFloat($('#length').val());
                var width = parseFloat($('#width').val());

                if (isNaN(length) || isNaN(width) || length < 0 || width < 0) {
                    $('#result')
                        .text("Please enter valid non-negative numbers for length and width.")
                        .removeClass('text-success')
                        .addClass('text-warning');
                    return;
                }

                $.ajax({
                    url: '@Url.Action("RectangleAPC", "Rectangle")',
                    type: 'POST',
                    data: $.param({ Length: length, Width: width, BtnType: type }),
                    success: function (response) {
                        $('#result')
                            .text('Result: ' + response.result)
                            .removeClass('text-warning')
                            .addClass('text-success');
                    }
                });
            }

            $('#areaBtn').click(function () {
                calculate('area');
            });

            $('#perimBtn').click(function () {
                calculate('perimeter');
            });
        });
    </script>
}